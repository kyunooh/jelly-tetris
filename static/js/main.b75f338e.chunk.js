(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,r){e.exports=r(42)},31:function(e,t,r){},32:function(e,t,r){},38:function(e,t,r){},39:function(e,t,r){},40:function(e,t,r){},41:function(e,t,r){},42:function(e,t,r){"use strict";r.r(t);var n,o=r(1),c=r.n(o),l=r(17),a=r.n(l),i=(r(31),r(32),r(7)),u=r(5),f=r(8),d=r(13),s=r(45),v=r(44),m=function(){var e=localStorage.getItem("jelly-tetris");return e?JSON.parse(e):{newBlock:!0,gameOver:!1,dropping:!1,hold:!1,canHold:!0,removedLines:0,levels:1,currentBlock:[],currentBlockNumber:-1,nextBlock:[],nextBlockNumber:-1,holdBlock:[],temporaryHoldBlockNumber:0,currentBlockLocation:[0,0],grid:Array(16).fill(Array(10).fill(0))}},g=function(e){for(var t=!1,r=0;r<e.grid.length;r++){for(var n=0;n<e.grid[r].length;n++)if(e.grid[r][n]>10){e.currentBlockLocation=[r,n],t=!0;break}if(t)break}};function h(e,t,r,n,o){return t+r>=e.length||n+o>=e[0].length||e[t+r][n+o]}var k=function(e){for(var t=[],r=e.currentBlock.length,n=e.currentBlock[0].length,o=e.currentBlock,c=0;c<n;c++){for(var l=[],a=0;a<r;a++)l.push(o[r-(r-a-1)-1][n-c-1]);t.push(l)}return function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(n<-3){if(o>2)return;e(t,r,-1,o+1)}else if(o>2)n>0&&e(t,r,-1);else if(n>3)e(t,r,0,o+1);else{for(var c=O(t.grid),l=0;l<c.length;l++)for(var a=0;a<c[l].length;a++)c[l][a]>10&&(c[l][a]=0);for(var i=t.currentBlockLocation[0]+o,u=t.currentBlockLocation[1]+n,f=0;f<r.length;f++)for(var s=0;s<r[f].length;s++){if(h(c,f,i,s,u))return void e(t,r,n>=0?n+1:n-1,o);c[f+i][s+u]=r[f][s]}t.currentBlock=r,t.grid=Object(d.a)(c)}}(e,t),Object(u.a)({},e)},b={0:[[11,11,11,11]],1:[[12,12,12],[0,0,12]],2:[[13,13,13],[13,0,0]],3:[[14,14],[14,14]],4:[[15,15,15],[0,15,0]],5:[[16,16,0],[0,16,16]],6:[[0,17,17],[17,17,0]]},O=function(e){return e.map(function(e){return e.slice()})};function j(e,t,r,n){return e===t.grid.length-1||r[e+1][n]<10&&r[e+1][n]>0}var p=function e(t){localStorage.setItem("jelly-tetris",JSON.stringify(t));var r=O(t.grid);if(t.newBlock)return function(e,t){if(0===t.currentBlock.length)t.currentBlockNumber=Math.floor(7*Math.random()),t.currentBlock=Object(d.a)(b[t.currentBlockNumber]),t.nextBlockNumber=Math.floor(7*Math.random()),t.nextBlock=Object(d.a)(b[t.nextBlockNumber]);else if(t.hold&&t.holdBlock.length>0)t.temporaryHoldBlockNumber=t.currentBlockNumber,t.currentBlock=Object(d.a)(t.holdBlock);else if(t.hold)t.temporaryHoldBlockNumber=t.currentBlockNumber;else{t.currentBlock=Object(d.a)(t.nextBlock),t.currentBlockNumber=t.nextBlockNumber,t.nextBlockNumber=Math.floor(7*Math.random());var r=b[t.nextBlockNumber];t.nextBlock=Object(d.a)(r)}for(var n=0;n<t.currentBlock.length;n++)for(var o=0;o<t.currentBlock[n].length;o++)e[n][o+3]>0&&e[n][o+3]<10&&(t.gameOver=!0),e[n][o+3]=t.currentBlock[n][o]}(r,t),t.newBlock=!1,t.dropping=!1,t.hold||(t.canHold=!0),t.hold=!1,t.grid=r,g(t),Object(u.a)({},t);for(var n=r.length-1;n>=0;n--)for(var o=0;o<r[n].length;o++)if(r[n][o]>10){if(j(n,t,r,o)){r=O(t.grid),t.newBlock=!0;for(var c=0;c<r.length;c++)for(var l=r[c],a=!0,i=0;i<l.length;i++)l[i]&&l[i]>10&&(l[i]-=10),l[i]||(a=!1),a&&i===l.length-1&&B(r,c,t);return t.grid=r,e(t)}r[n+1][o]=r[n][o],r[n][o]=0}return t.grid=r,g(t),Object(u.a)({},t)},B=function(e,t,r){e.splice(t,1),e.unshift(Array(10).fill(0)),r.removedLines+=1,r.removedLines%8===0&&(clearInterval(r.reservedTick),r.levels+=1,r.reservedTick=setInterval(function(){R()},1e3*Math.pow(.85,r.levels)))},w=function(e){return e>10},y="jelly-tetris/tick",E="jelly-tetris/rotate",N="jelly-tetris/drop",x="jelly-tetris/reset",L="jelly-tetris/hold",R=Object(s.a)(y),T=Object(s.a)("jelly-tetris/moveLeft"),_=Object(s.a)("jelly-tetris/moveRight"),I=Object(s.a)(E),H=Object(s.a)(N),A=Object(s.a)(x),S=Object(s.a)(L),M=Object(v.a)((n={},Object(f.a)(n,y,function(e){return p(e)}),Object(f.a)(n,"jelly-tetris/moveLeft",function(e){return function(e){for(var t=O(e.grid),r=!0,n=t.length-1;n>=0;n--)for(var o=t[n],c=0;c<o.length;c++)w(o[c])&&(0===o[c-1]?(t[n][c-1]=t[n][c],t[n][c]=0):r=!1);return r&&(e.grid=t),g(e),Object(u.a)({},e)}(e)}),Object(f.a)(n,"jelly-tetris/moveRight",function(e){return function(e){for(var t=O(e.grid),r=!0,n=t.length-1;n>=0;n--)for(var o=t[n],c=o.length-1;c>=0;c--)if(w(o[c]))if(0===o[c+1]){var l=t[n][c];t[n][c]=0,t[n][c+1]=l}else r=!1;return r&&(e.grid=t),g(e),Object(u.a)({},e)}(e)}),Object(f.a)(n,E,function(e){return k(e)}),Object(f.a)(n,N,function(e){return function(e){for(e.dropping=!0;e.dropping;)e=p(e);return Object(u.a)({},e)}(e)}),Object(f.a)(n,x,function(e){return function(e){return clearInterval(e.reservedTick),localStorage.setItem("jelly-tetris",""),m()}(e)}),Object(f.a)(n,L,function(e){return function(e){if(!e.canHold)return Object(u.a)({},e);e.canHold=!1,e.hold=!0;for(var t=0;t<e.grid.length;t++)for(var r=0;r<e.grid[t].length;r++)e.grid[t][r]>10&&(e.grid[t][r]=0);return e.newBlock=!0,(e=p(e)).holdBlock=b[e.temporaryHoldBlockNumber],e}(e)}),n),m()),D=function(e){return Object(i.c)(Object(u.a)({tetrisReducer:M},e))},C=r(25),X=r(11),J=r.n(X),W=r(16),U=J.a.mark(P),K=J.a.mark($),V=J.a.mark(q),G=function(e){return new Promise(function(t){return setTimeout(t,e)})};function P(){var e;return J.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(W.c)(function(e){return e.tetrisReducer.levels});case 2:return e=t.sent,t.next=5,G(1e3*Math.pow(.85,e));case 5:return t.next=7,Object(W.b)(R());case 7:case"end":return t.stop()}},U)}function $(){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.d)("WATCH_TICK",function(){return P()});case 2:case"end":return e.stop()}},K)}function q(){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(W.a)([$()]);case 2:case"end":return e.stop()}},V)}var z=function(){var e=Object(C.a)(),t=Object(i.e)(D(),Object(i.d)(Object(i.a)(e),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));return t.asyncReducers={},t.injectReducer=function(e,r){t.asyncReducers[e]=r,t.replaceReducer(D(t.asyncReducers))},e.run(q),t},F=r(14);r(38),r(39);var Q=function(e){var t=e.grid,r=[];function n(e){for(var r=[],n=0;n<t[e].length;n++){var o="".concat(e,"-").concat(n);t[e][n]?r.push(c.a.createElement("span",{className:"cell fill-".concat(t[e][n]),key:o},"\xa0")):r.push(c.a.createElement("span",{className:"cell empty",key:o},"\xa0"))}return r}for(var o=0;o<t.length;o++)r.push(c.a.createElement("div",{className:"row",key:o},n(o)));return r},Y=(r(40),function(){return c.a.createElement("div",{id:"game-over"},"Game Over")});var Z=function(e){var t=e.grid;return e.tickTimer(e.levels),document.onkeydown=function(t){"ArrowLeft"===t.key&&e.moveLeft(),"ArrowRight"===t.key&&e.moveRight(),"ArrowDown"===t.key&&e.tick(),"ArrowUp"===t.key&&e.rotate()," "===t.key&&e.drop(),"Shift"===t.key&&e.hold()},c.a.createElement("div",null,e.gameOver?c.a.createElement(Y,null):c.a.createElement(Q,{grid:t}))},ee=Object(F.b)(function(e){return Object(u.a)({},e.tetrisReducer)},function(e){return{tick:function(){return e(R())},moveLeft:function(){return e(T())},moveRight:function(){return e(_())},rotate:function(){return e(I())},drop:function(){return e(H())},tickTimer:function(t){return e({type:"WATCH_TICK",levels:t})},hold:function(){return e(S())}}})(function(e){return c.a.createElement(Z,{tick:function(){e.tick()},moveLeft:function(){e.moveLeft()},moveRight:function(){e.moveRight()},rotate:function(){e.rotate()},drop:function(){e.drop()},tickTimer:function(t){e.tickTimer(t)},hold:function(){e.hold()},grid:e.grid,levels:e.levels,gameOver:e.gameOver,reservedTick:e.reservedTick})}),te=(r(41),function(e){var t=function(e){for(var t=[[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)t[r+1][n+1]=e[r][n];return t};return c.a.createElement("div",{id:"information-window"},c.a.createElement(Q,{grid:t(e.nextBlock)}),c.a.createElement("div",null,"NEXT"),c.a.createElement(Q,{grid:t(e.holdBlock)}),c.a.createElement("div",null,"HOLD"),c.a.createElement("div",{id:"removed-lines"},"Lines: ",e.removedLines),c.a.createElement("div",{id:"levels"},"Level: ",e.levels),c.a.createElement("button",{id:"prevent-reset",style:{width:"0px",height:"0px"}}),c.a.createElement("button",{onClick:e.reset},"Reset"))}),re=Object(F.b)(function(e){return Object(u.a)({},e.tetrisReducer)},function(e){return{reset:function(){return e(A())}}})(function(e){return c.a.createElement(te,{nextBlock:e.nextBlock,holdBlock:e.holdBlock,removedLines:e.removedLines,levels:e.levels,reset:function(){e.reset(),document.getElementById("prevent-reset").focus()}})}),ne=z();var oe=function(){return c.a.createElement(F.a,{store:ne},c.a.createElement("div",{className:"App"},c.a.createElement(ee,null),c.a.createElement(re,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(c.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[26,1,2]]]);
//# sourceMappingURL=main.b75f338e.chunk.js.map